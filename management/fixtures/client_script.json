[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Meeting",
  "enabled": 1,
  "modified": "2025-06-30 00:02:52.973874",
  "module": "",
  "name": "Hide User",
  "script": "frappe.ui.form.on('Meeting', {\r\n    onload: function(frm) {\r\n        frm.fields_dict['attendees'].grid.get_field('attendee_name').get_query = function(doc, cdt, cdn) {\r\n            return {\r\n                filters: {\r\n                    status: \"Active\"\r\n                }\r\n            };\r\n        };\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Order",
  "enabled": 0,
  "modified": "2025-06-29 03:25:17.967126",
  "module": null,
  "name": "BOQ Filter",
  "script": "frappe.ui.form.on('BOQ', {\r\n    onload: function(frm) {\r\n        frm.fields_dict['items'].grid.get_field('item_code').get_query = function(doc, cdt, cdn) {\r\n            let child = locals[cdt][cdn];\r\n            return {\r\n                query: \"erpnext.controllers.queries.item_query\",\r\n                filters: {\r\n                    'price_list': doc.selling_price_list\r\n                }\r\n            };\r\n        };\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Account",
  "enabled": 1,
  "modified": "2025-07-11 23:42:12.665000",
  "module": null,
  "name": "Acc-Series",
  "script": "frappe.ui.form.on('Account', {\r\n    account_type(frm) {\r\n        if (frm.doc.account_type == \"Asset\") {\r\n            frm.set_value(\"custom_naming_series\", \"AST-.####\");\r\n        } else if (frm.doc.account_type == \"Liability\") {\r\n            frm.set_value(\"custom_naming_series\", \"LIA-.####\");\r\n        } else if (frm.doc.account_type == \"Income Account\") {\r\n            frm.set_value(\"custom_naming_series\", \"INC-.####\");\r\n        }\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Order",
  "enabled": 1,
  "modified": "2025-07-09 02:58:30.852919",
  "module": null,
  "name": "Allow Multiple PO for BOQ",
  "script": "frappe.ui.form.on('Sales Order', {\r\n    po_no: function (frm) {\r\n        if (!frm.doc.po_no || !frm.doc.customer) return;\r\n\r\n        frappe.call({\r\n            method: 'frappe.client.get_list',\r\n            args: {\r\n                doctype: 'Sales Order',\r\n                filters: {\r\n                    po_no: frm.doc.po_no,\r\n                    customer: frm.doc.customer,\r\n                    docstatus: ['<', 2],\r\n                    name: ['!=', frm.doc.name]\r\n                },\r\n                fields: ['name']\r\n            },\r\n            callback: function (r) {\r\n                if (r.message && r.message.length > 0) {\r\n                    frappe.msgprint({\r\n                        title: __('Warning'),\r\n                        message: __('This Purchase Order Number is already used in another Sales Order.'),\r\n                        indicator: 'orange'\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Request",
  "enabled": 1,
  "modified": "2025-07-16 00:02:41.667670",
  "module": null,
  "name": "Item Fillter",
  "script": "frappe.ui.form.on('Item Request', {\r\n    item_code: {\r\n        get_query: function(frm, cdt, cdn) {\r\n            return {\r\n                filters: {\r\n                    party_type: frm.doc.party_type\r\n                }\r\n            };\r\n        }\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Order",
  "enabled": 1,
  "modified": "2025-06-30 06:54:05.854155",
  "module": null,
  "name": "BOQ-Price List",
  "script": "frappe.ui.form.on('Sales Invoice', {\r\n    selling_price_list: function(frm) {\r\n        if (!frm.doc.selling_price_list) return;\r\n\r\n        frappe.call({\r\n            method: 'frappe.client.get_list',\r\n            args: {\r\n                doctype: 'Item Price',\r\n                filters: {\r\n                    price_list: frm.doc.selling_price_list\r\n                },\r\n                fields: ['item_code']\r\n            },\r\n            callback: function(r) {\r\n                if (r.message) {\r\n                    let allowed_items = r.message.map(d => d.item_code);\r\n                    \r\n                    // Ù†Ø¶Ø¹ Ø§Ù„ØªØµÙÙŠØ© Ø¹Ù„Ù‰ ÙƒÙ„ ØµÙ Ù…Ù† ØµÙÙˆÙ items\r\n                    frm.fields_dict.items.grid.get_field('item_code').get_query = function(doc, cdt, cdn) {\r\n                        return {\r\n                            filters: {\r\n                                item_code: ['in', allowed_items]\r\n                            }\r\n                        };\r\n                    };\r\n                }\r\n            }\r\n        });\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Meeting",
  "enabled": 0,
  "modified": "2025-07-05 19:43:33.093690",
  "module": null,
  "name": "Meeting Invitation",
  "script": "frappe.ui.form.on('Meeting', {\r\n  before_save: function(frm) {\r\n    let email_list = [];\r\n    if (frm.doc.attendees && frm.doc.attendees.length > 0) {\r\n      frm.doc.attendees.forEach(function(attendee) {\r\n        if (attendee.email) {\r\n          email_list.push(attendee.email);\r\n        }\r\n      });\r\n\r\n      if (email_list.length > 0) {\r\n        frm.set_value('attendee_emails', email_list.join(\", \"));\r\n        console.log(\"Emails collected:\", email_list.join(\", \"));\r\n      } else {\r\n        console.log(\"No emails found.\");\r\n        frappe.msgprint(__('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª.'));\r\n      }\r\n    }\r\n  },\r\n  on_submit: function(frm) {\r\n    if (frm.doc.attendee_emails) {\r\n      let attendee_names = frm.doc.attendees.map(attendee => {\r\n        return attendee.employee_name || attendee.attendee_name;\r\n      }).join(\"<br>\");\r\n\r\n      frappe.db.get_value('Employee', frm.doc.meeting_manager, 'employee_name').then(r => {\r\n        let manager_name = r && r.message ? r.message.employee_name : frm.doc.meeting_manager;\r\n\r\n        frappe.call({\r\n          method: \"frappe.core.doctype.communication.email.make\",\r\n          args: {\r\n            recipients: frm.doc.attendee_emails,\r\n            subject: `ğŸ“… Ø¯Ø¹ÙˆØ© Ø§Ø¬ØªÙ…Ø§Ø¹ Ø¨ØªØ§Ø±ÙŠØ®: ${frm.doc.meeting_date || \"ØºÙŠØ± Ù…Ø­Ø¯Ø¯\"}`,\r\n            content: `\r\n              <div dir=\"rtl\" style=\"text-align: right; font-family: 'Tahoma', sans-serif; border: 1px solid #ddd; padding: 20px;\">\r\n                <h2 style=\"color: #007bff;\">Ø¯Ø¹ÙˆØ© Ù„Ø­Ø¶ÙˆØ± Ø§Ø¬ØªÙ…Ø§Ø¹</h2>\r\n                <p style=\"font-family: 'Tahoma';\">Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ</p>\r\n                <p style=\"font-family: 'Tahoma';\">ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙƒÙ… Ù…ÙˆØ¹Ø¯ Ø§Ø¬ØªÙ…Ø§Ø¹:</p>\r\n                <table style=\"width: 100%; border-collapse: collapse; margin-bottom: 20px; font-family: 'Tahoma';\">\r\n                  <tr>\r\n                    <td style=\"width: 20%;\"><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong></td>\r\n                    <td>${frm.doc.meeting_date || \"dd/mm/yyyy\"}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Ø§Ù„ÙˆÙ‚Øª:</strong></td>\r\n                    <td>${frm.doc.meeting_time || \"hh:mm\"}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong></td>\r\n                    <td>${frm.doc.location || \"ØºÙŠØ± Ù…Ø­Ø¯Ø¯\"}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹:</strong></td>\r\n                    <td>${frm.doc.meeting_subject || \"ØºÙŠØ± Ù…Ø­Ø¯Ø¯\"}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Ø§Ù„Ø­Ø¶ÙˆØ±:</strong></td>\r\n                    <td>${attendee_names}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><strong>Ø§Ø³Ù… Ù…Ø¯ÙŠØ± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹:</strong></td>\r\n                    <td>${manager_name}</td>\r\n                  </tr>\r\n                </table>\r\n                <p style=\"font-family: 'Tahoma';\">ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¶ÙˆØ± Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ ÙÙŠ Ø­Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª.</p>\r\n                <p style=\"font-family: 'Tahoma';\"><strong>Ø´ÙƒØ±Ù‹Ø§ Ù„ÙƒÙ…ØŒ</strong></p>\r\n              </div>\r\n            `,\r\n            communication_medium: \"Email\",\r\n            send_email: 1\r\n          },\r\n          callback: function(response) {\r\n            frappe.msgprint(__('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¯Ø¹ÙˆØ© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ Ø¨Ù†Ø¬Ø§Ø­.'));\r\n          }\r\n        });\r\n      });\r\n    } else {\r\n      frappe.msgprint(__('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¯Ø¹ÙˆØ©. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª ØµØ­ÙŠØ­Ø©.'));\r\n    }\r\n  }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Meeting Minutes",
  "enabled": 1,
  "modified": "2025-02-12 06:18:28.051037",
  "module": null,
  "name": "Meeting Minutes Email",
  "script": "frappe.ui.form.on('Meeting Minutes', {\n  before_save: function(frm) {\n    if (frm.doc.meeting_id) {  // ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† meeting_id Ù…ÙˆØ¬ÙˆØ¯\n      frappe.db.get_doc('Meeting', frm.doc.meeting_id).then(meeting => {\n        if (meeting.attendees && meeting.attendees.length > 0) {\n          let email_list = [];\n          meeting.attendees.forEach(attendee => {\n            if (attendee.email) {\n              email_list.push(attendee.email);\n            }\n          });\n\n          if (email_list.length > 0) {\n            frm.set_value('attendee_emails', email_list.join(\", \"));\n          }\n        }\n      });\n    }\n  }\n});\n",
  "view": "Form"
 }
]